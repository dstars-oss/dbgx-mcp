## 1. 端口回退策略实现

- [x] 1.1 在 `src/mcp/http_server.cpp` 重构监听启动流程：从初始端口开始按顺序尝试候选端口，直到绑定成功或达到最大尝试次数
- [x] 1.2 在绑定错误处理中区分“端口占用”和“非可重试错误”，仅对端口占用继续尝试
- [x] 1.3 将最终监听端口与尝试摘要返回到调用方，确保启动结果可被上层消费

## 2. 启动输出与连接可见性

- [x] 2.1 在 `src/windbg_mcp_extension.cpp` 增加端口冲突重试日志，输出初始端口、冲突次数与最终端口/失败原因
- [x] 2.2 校验服务进入可用状态时对外显示的监听地址使用最终绑定端口，而非固定初始端口
- [x] 2.3 确保失败路径在达到上限或遇到非可重试错误时给出可诊断且一致的错误输出

## 3. 测试覆盖

- [x] 3.1 更新 `tests/unit_tests.cpp`，覆盖“初始端口可用时直接绑定”的启动路径
- [x] 3.2 增加“初始端口占用后回退成功”测试，断言按顺序尝试并绑定到首个可用端口
- [x] 3.3 增加“连续冲突达上限失败”和“非端口占用错误快速失败”测试，断言失败语义与日志摘要
- [x] 3.4 运行 `ctest --test-dir build -C Debug --output-on-failure` 并修复新增回归

## 4. 文档与验收

- [x] 4.1 更新 `README.md` 与 `README.zh-CN.md`，说明端口回退行为、最终端口获取方式与排障提示
- [x] 4.2 记录最小人工验收步骤：预占用默认端口后启动扩展，验证自动回退与 `/mcp` 可达
