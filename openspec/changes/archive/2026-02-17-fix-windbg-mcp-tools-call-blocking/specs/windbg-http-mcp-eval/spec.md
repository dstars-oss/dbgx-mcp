## 新增需求

<!-- 无 -->

## 修改需求

### 需求:MCP 请求与响应必须在 WinDbg 会话中可见回显
系统在处理 `/mcp` 请求时必须输出可读且可排障的请求/响应诊断信息到 WinDbg 可见输出，并且该输出必须不改变原有 JSON-RPC 处理结果。

#### 场景:请求成功时输出可关联的阶段化摘要
- **当** 客户端向 `/mcp` 发送合法 `tools/call` 请求并得到成功响应
- **那么** 系统必须在 WinDbg 输出中包含该请求的阶段化摘要
- **并且** 这些阶段日志必须可通过同一请求标识进行关联
- **并且** 日志必须包含 HTTP 方法、路径、JSON-RPC 方法、工具名、结果状态与耗时等关键排障字段

#### 场景:请求失败时仍输出可定位的错误阶段信息
- **当** 客户端发送无效 JSON-RPC 请求或工具执行失败并触发错误响应
- **那么** 系统必须在 WinDbg 输出中记录失败阶段与错误摘要
- **并且** 系统必须保持既有错误码与响应语义不变

#### 场景:超长或敏感内容被安全处理
- **当** 请求或响应包含超长文本，或请求头包含敏感字段
- **那么** 系统必须对回显内容执行长度截断并标记已截断
- **并且** 系统必须对敏感字段执行掩码，禁止直接输出原始敏感值

#### 场景:执行阻塞时仍可判断停滞阶段
- **当** `tools/call` 进入工具执行阶段后长时间未返回响应
- **那么** 系统必须至少输出进入执行阶段前后的关键阶段日志
- **并且** 使用者必须能够仅凭 WinDbg 输出判断该请求停滞在执行阶段而非路由阶段

## 移除需求

<!-- 无 -->
